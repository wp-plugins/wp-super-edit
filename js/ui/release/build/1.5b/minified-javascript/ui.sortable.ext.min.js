(function(A){A.ui.plugin.add("sortable","cursor",{start:function(D,C){var B=A("body");if(B.css("cursor")){C.options._cursor=B.css("cursor")}B.css("cursor",C.options.cursor)},stop:function(C,B){if(B.options._cursor){A("body").css("cursor",B.options._cursor)}}});A.ui.plugin.add("sortable","zIndex",{start:function(D,C){var B=C.helper;if(B.css("zIndex")){C.options._zIndex=B.css("zIndex")}B.css("zIndex",C.options.zIndex)},stop:function(C,B){if(B.options._zIndex){A(B.helper).css("zIndex",B.options._zIndex)}}});A.ui.plugin.add("sortable","opacity",{start:function(D,C){var B=C.helper;if(B.css("opacity")){C.options._opacity=B.css("opacity")}B.css("opacity",C.options.opacity)},stop:function(C,B){if(B.options._opacity){A(B.helper).css("opacity",B.options._opacity)}}});A.ui.plugin.add("sortable","revert",{stop:function(D,C){var B=C.instance;B.cancelHelperRemoval=true;var E=B.currentItem.offset();if(C.instance.options.zIndex){C.helper.css("zIndex",C.instance.options.zIndex)}if(C.instance.placeholder){C.instance.placeholder.animate({opacity:"hide"},parseInt(C.options.revert,10)||500)}C.helper.animate({left:E.left-B.offsetParentOffset.left-(parseInt(B.currentItem.css("marginLeft"),10)||0),top:E.top-B.offsetParentOffset.top-(parseInt(B.currentItem.css("marginTop"),10)||0)},parseInt(C.options.revert,10)||500,function(){B.currentItem.css("visibility","visible");window.setTimeout(function(){if(B.placeholder){B.placeholder.remove()}B.helper.remove();if(C.options._zIndex){C.helper.css("zIndex",C.options._zIndex)}},50)})}});A.ui.plugin.add("sortable","containment",{start:function(D,B){var F=B.options;if((F.containment.left!=undefined||F.containment.constructor==Array)&&!F._containment){return }if(!F._containment){F._containment=F.containment}if(F._containment=="parent"){F._containment=this[0].parentNode}if(F._containment=="document"){F.containment=[0,0,A(document).width(),(A(document).height()||document.body.parentNode.scrollHeight)]}else{var C=A(F._containment)[0];var E=A(F._containment).offset();F.containment=[E.left,E.top,E.left+(C.offsetWidth||C.scrollWidth),E.top+(C.offsetHeight||C.scrollHeight)]}},sort:function(E,D){var F=D.options;var C=D.helper;var G=F.containment;var B=D.instance;if(G.constructor==Array){if((D.absolutePosition.left<G[0])){B.position.left=G[0]-(B.offset.left-B.clickOffset.left)}if((D.absolutePosition.top<G[1])){B.position.top=G[1]-(B.offset.top-B.clickOffset.top)}if(D.absolutePosition.left-G[2]+B.helperProportions.width>=0){B.position.left=G[2]-(B.offset.left-B.clickOffset.left)-B.helperProportions.width}if(D.absolutePosition.top-G[3]+B.helperProportions.height>=0){B.position.top=G[3]-(B.offset.top-B.clickOffset.top)-B.helperProportions.height}}else{if((D.position.left<G.left)){B.position.left=G.left}if((D.position.top<G.top)){B.position.top=G.top}if(D.position.left-B.offsetParent.innerWidth()+B.helperProportions.width+G.right+(parseInt(B.offsetParent.css("borderLeftWidth"),10)||0)+(parseInt(B.offsetParent.css("borderRightWidth"),10)||0)>=0){B.position.left=B.offsetParent.innerWidth()-B.helperProportions.width-G.right-(parseInt(B.offsetParent.css("borderLeftWidth"),10)||0)-(parseInt(B.offsetParent.css("borderRightWidth"),10)||0)}if(D.position.top-B.offsetParent.innerHeight()+B.helperProportions.height+G.bottom+(parseInt(B.offsetParent.css("borderTopWidth"),10)||0)+(parseInt(B.offsetParent.css("borderBottomWidth"),10)||0)>=0){B.position.top=B.offsetParent.innerHeight()-B.helperProportions.height-G.bottom-(parseInt(B.offsetParent.css("borderTopWidth"),10)||0)-(parseInt(B.offsetParent.css("borderBottomWidth"),10)||0)}}}});A.ui.plugin.add("sortable","axis",{sort:function(C,B){var D=B.options;if(D.constraint){D.axis=D.constraint}D.axis=="x"?B.instance.position.top=B.instance.originalPosition.top:B.instance.position.left=B.instance.originalPosition.left}});A.ui.plugin.add("sortable","scroll",{start:function(C,B){var D=B.options;D.scrollSensitivity=D.scrollSensitivity||20;D.scrollSpeed=D.scrollSpeed||20;B.instance.overflowY=function(E){do{if((/auto|scroll/).test(E.css("overflow"))||(/auto|scroll/).test(E.css("overflow-y"))){return E}E=E.parent()}while(E[0].parentNode);return A(document)}(this);B.instance.overflowX=function(E){do{if((/auto|scroll/).test(E.css("overflow"))||(/auto|scroll/).test(E.css("overflow-x"))){return E}E=E.parent()}while(E[0].parentNode);return A(document)}(this)},sort:function(D,C){var E=C.options;var B=C.instance;if(B.overflowY[0]!=document&&B.overflowY[0].tagName!="HTML"){if(B.overflowY[0].offsetHeight-(C.position.top-B.overflowY[0].scrollTop+B.clickOffset.top)<E.scrollSensitivity){B.overflowY[0].scrollTop=B.overflowY[0].scrollTop+E.scrollSpeed}if((C.position.top-B.overflowY[0].scrollTop+B.clickOffset.top)<E.scrollSensitivity){B.overflowY[0].scrollTop=B.overflowY[0].scrollTop-E.scrollSpeed}}else{if(D.pageY-A(document).scrollTop()<E.scrollSensitivity){A(document).scrollTop(A(document).scrollTop()-E.scrollSpeed)}if(A(window).height()-(D.pageY-A(document).scrollTop())<E.scrollSensitivity){A(document).scrollTop(A(document).scrollTop()+E.scrollSpeed)}}if(B.overflowX[0]!=document&&B.overflowX[0].tagName!="HTML"){if(B.overflowX[0].offsetWidth-(C.position.left-B.overflowX[0].scrollLeft+B.clickOffset.left)<E.scrollSensitivity){B.overflowX[0].scrollLeft=B.overflowX[0].scrollLeft+E.scrollSpeed}if((C.position.top-B.overflowX[0].scrollLeft+B.clickOffset.left)<E.scrollSensitivity){B.overflowX[0].scrollLeft=B.overflowX[0].scrollLeft-E.scrollSpeed}}else{if(D.pageX-A(document).scrollLeft()<E.scrollSensitivity){A(document).scrollLeft(A(document).scrollLeft()-E.scrollSpeed)}if(A(window).width()-(D.pageX-A(document).scrollLeft())<E.scrollSensitivity){A(document).scrollLeft(A(document).scrollLeft()+E.scrollSpeed)}}C.instance.recallOffset(D)}})})(jQuery);